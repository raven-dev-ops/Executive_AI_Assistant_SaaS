<!doctype html>

<html lang="en">

  <head>

    <meta charset="utf-8" />

    <title>AI Telephony Dashboard</title>

    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link

      rel="stylesheet"

      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"

      integrity="sha256-sA+e2atSaNVD45Hxbp2FKs1rGgRkGzm4nFv9Z8M0A+E="

      crossorigin=""

    />

    <script

      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"

      integrity="sha256-o9N1j7kGStGk6Z6pU4bYdVQKjFVjJ7gE0l2l9h8b+3E="

      crossorigin=""

    ></script>

    <style>

      @import url("https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;600;700&display=swap");

      :root {

        --nav-height: 72px;

        --bg: #f6f8fb;

        --card: #ffffff;

        --text: #0f172a;

        --muted: #64748b;

        --border: #e2e8f0;

        --accent: #2563eb;

      }

      * {

        margin: 0;

        padding: 0;

        box-sizing: border-box;

      }

      body {

        font-family: "Space Grotesk", "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;

        background: radial-gradient(circle at 10% 10%, rgba(37, 99, 235, 0.08), transparent 25%),

          radial-gradient(circle at 85% 15%, rgba(16, 185, 129, 0.08), transparent 22%),

          var(--bg);

        min-height: 100vh;

        color: var(--text);

        padding-bottom: 2rem;

        line-height: 1.5;

      }

      .header-bar {

        background: rgba(255, 255, 255, 0.9);

        backdrop-filter: blur(8px);

        border-bottom: 1px solid var(--border);

        padding: 1rem 2rem;

        box-shadow: 0 8px 24px rgba(15, 23, 42, 0.05);

      }

      .header-content {

        max-width: 1400px;

        margin: 0 auto;

        display: flex;

        align-items: center;

        gap: 1.25rem;

        flex-wrap: wrap;

      }

      .logo-section {

        display: flex;

        align-items: center;

        gap: 1rem;

      }

      .logo {

        width: 44px;

        height: 44px;

        background: linear-gradient(135deg, #2563eb 0%, #22c55e 100%);

        border-radius: 12px;

        display: flex;

        align-items: center;

        justify-content: center;

        box-shadow: 0 10px 24px rgba(37, 99, 235, 0.18);

      }

      .logo svg {

        width: 26px;

        height: 26px;

        fill: white;

      }

      h1 {

        font-size: 1.4rem;

        font-weight: 700;

        color: var(--text);

      }

      .status-bar {

        display: flex;

        gap: 0.6rem;

        align-items: center;

        margin-left: auto;

        flex-wrap: wrap;

      }

      .status-badge {

        padding: 0.35rem 0.75rem;

        border-radius: 18px;

        font-size: 0.75rem;

        font-weight: 600;

        display: inline-flex;

        align-items: center;

        gap: 0.4rem;

        background: #eef2ff;

        color: #312e81;

        border: 1px solid #e0e7ff;

      }

      .status-badge.success {

        background: #ecfdf3;

        color: #166534;

        border-color: #bbf7d0;

      }

      .status-badge.error {

        background: #fef2f2;

        color: #b91c1c;

        border-color: #fecdd3;

      }

      .status-badge.muted {

        background: #f8fafc;

        color: #475569;

        border-color: #e2e8f0;

      }



      .data-strip {

        display: grid;

        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));

        gap: 0.75rem;

        padding: 0.75rem;

        margin: 0.5rem 0 1.25rem;

        background: #ffffff;

        border: 1px solid #e2e8f0;

        border-radius: 14px;

        box-shadow: 0 6px 16px rgba(15, 23, 42, 0.06);

      }



      .data-pill {

        display: flex;

        align-items: center;

        gap: 0.6rem;

        padding: 0.65rem 0.8rem;

        border-radius: 12px;

        background: #f8fafc;

        border: 1px solid #e2e8f0;

        transition: border-color 0.2s, box-shadow 0.2s;

      }



      .data-pill strong {

        display: block;

        font-size: 0.95rem;

        color: #0f172a;

      }



      .pill-note {

        font-size: 0.82rem;

        color: #64748b;

      }



      .pill-action {

        margin-left: auto;

        padding: 0.4rem 0.75rem;

        border-radius: 10px;

        border: 1px solid #e2e8f0;

        background: #fff;

        color: #2563eb;

        font-weight: 700;

        cursor: pointer;

      }



      .data-pill.success {

        border-color: #bbf7d0;

        background: #ecfdf3;

      }



      .data-pill.warn {

        border-color: #fcd34d;

        background: #fffbeb;

      }



      .data-pill.error {

        border-color: #fecdd3;

        background: #fef2f2;

      }



      .quick-actions {

        display: flex;

        gap: 0.6rem;

        flex-wrap: wrap;

        margin: 0.5rem 0 1rem;

      }



      .quick-actions button {

        display: inline-flex;

        align-items: center;

        gap: 0.45rem;

        border-radius: 12px;

        border: 1px solid #e2e8f0;

        background: #f8fafc;

        color: #0f172a;

        font-weight: 700;

        padding: 0.55rem 0.9rem;

      }



      .quick-actions button:hover {

        background: #eef2ff;

        border-color: #cbd5e1;

      }



      .filter-row {

        display: flex;

        gap: 0.6rem;

        flex-wrap: wrap;

        align-items: center;

        margin: 0.35rem 0 0.5rem;

      }



      .filter-row input {

        flex: 1 1 200px;

      }



      .filter-row select {

        min-width: 140px;

      }



      .filter-row .muted {
        margin-left: auto;
      }

      .summary-row {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        font-size: 0.85rem;
        color: #475569;
        margin: 0.2rem 0 0.6rem;
      }

      .pill-badge {

        display: inline-flex;

        align-items: center;

        gap: 0.35rem;

        padding: 0.2rem 0.6rem;

        border-radius: 999px;

        font-size: 0.8rem;

        font-weight: 700;

        background: #f1f5f9;

        color: #0f172a;

      }



      .pill-badge.voice { background: #eef2ff; color: #312e81; }

      .pill-badge.sms { background: #ecfeff; color: #0e7490; }

      .pill-badge.chat { background: #f5f3ff; color: #6b21a8; }

      .pill-badge.success { background: #ecfdf3; color: #166534; }

      .pill-badge.warn { background: #fffbeb; color: #92400e; }

      .pill-badge.error { background: #fef2f2; color: #b91c1c; }



      .status-dot {

        width: 8px;

        height: 8px;

        border-radius: 50%;

        background: currentColor;

        animation: pulse 2s infinite;

      }



      .user-chip {

        display: inline-flex;

        align-items: center;

        gap: 0.5rem;

        padding: 0.4rem 0.75rem;

        border-radius: 999px;

        background: #e2e8f0;

        color: #0f172a;

        font-weight: 600;

        font-size: 0.85rem;

        border: 1px solid rgba(0, 0, 0, 0.05);

      }



      .user-chip .user-dot {

        width: 10px;

        height: 10px;

        border-radius: 999px;

        background: #22c55e;

      }



      .user-chip.muted {

        background: #f1f5f9;

        color: #64748b;

      }



      .ghost-button {

        background: transparent;

        color: #1f2937;

        border: 1px solid #e2e8f0;

        padding: 0.45rem 0.9rem;

        border-radius: 10px;

      }



      .ghost-button:hover {

        background: #edf2f7;

        color: #111827;

      }

      

      @keyframes pulse {

        0%, 100% { opacity: 1; }

        50% { opacity: 0.5; }

      }

      

      .controls {

        display: flex;

        gap: 0.5rem;

        flex-wrap: wrap;

        align-items: center;

      }



      .locale-select {

        padding: 0.45rem 0.75rem;

        border-radius: 10px;

        border: 1px solid #e2e8f0;

        background: #ffffff;

        color: #0f172a;

        font-weight: 600;

        min-width: 120px;

      }

      

      button {

        padding: 0.5rem 1rem;

        border-radius: 8px;

        border: none;

        background: #667eea;

        color: white;

        font-weight: 500;

        cursor: pointer;

        transition: all 0.2s;

        font-size: 0.875rem;

      }

      

      button:hover {

        background: #5568d3;

        transform: translateY(-1px);

        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);

      }

      

      button:disabled {

        opacity: 0.5;

        cursor: not-allowed;

        transform: none;

      }

      

      .container {

        max-width: 1400px;

        margin: 0 auto;

        padding: 1.5rem;

      }

      

      .dashboard-grid {

        display: grid;

        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));

        gap: 1.25rem;

        margin-top: 1rem;

      }

      

      .card {

        background: white;

        border-radius: 16px;

        padding: 1.5rem;

        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);

        transition: all 0.3s;

        border: 1px solid rgba(0, 0, 0, 0.05);

        scroll-margin-top: 90px;

      }

      

      .card:hover {

        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);

        transform: translateY(-2px);

      }



      .card :is(button, input, textarea, select):focus-visible,

      .assistant-panel :is(button, input, textarea):focus-visible {

        outline: 2px solid #0ea5e9;

        outline-offset: 2px;

      }

      :where(a, button, input, textarea, select, [role="button"]):focus-visible {
        outline: 2px solid #0ea5e9;
        outline-offset: 2px;
      }

      

      .card-header {

        display: flex;

        align-items: center;

        gap: 0.75rem;

        margin-bottom: 1rem;

        padding-bottom: 0.75rem;

        border-bottom: 2px solid #f7fafc;

      }

      

      .card-icon {

        width: 40px;

        height: 40px;

        border-radius: 10px;

        display: flex;

        align-items: center;

        justify-content: center;

        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

      }

      

      .card-icon svg {

        width: 20px;

        height: 20px;

        fill: white;

      }

      

      .card h2 {

        font-size: 1.125rem;

        font-weight: 600;

        color: #1a202c;

        flex: 1;

      }

      

      .metric-row {

        display: flex;

        justify-content: space-between;

        align-items: center;

        padding: 0.75rem 0;

        border-bottom: 1px solid #f7fafc;

      }

      .metric-row-interactive {
        width: 100%;
        text-align: left;
        cursor: pointer;
        background: transparent;
        appearance: none;
        -webkit-appearance: none;
        font: inherit;
        color: inherit;
        border: none;
        border-bottom: 1px solid #f7fafc;
      }

      .metric-row-interactive:hover {
        background: #f8fafc;
      }

      

      .metric-row:last-child {

        border-bottom: none;

      }

      

      .metric-label {

        font-size: 0.875rem;

        color: #64748b;

        font-weight: 500;

      }

      

      .metric-value {

        font-size: 1.25rem;

        font-weight: 700;

        color: #1a202c;

      }

      

      .metric-value.large {

        font-size: 2rem;

      }

      

      .pill {

        display: inline-block;

        padding: 0.25rem 0.75rem;

        border-radius: 12px;

        font-size: 0.75rem;

        font-weight: 600;

        background: #e2e8f0;

        color: #475569;

        margin: 0.25rem;

      }

      

      .tag {

        display: inline-block;

        padding: 0.25rem 0.5rem;

        border-radius: 6px;

        font-size: 0.7rem;

        font-weight: 600;

        text-transform: uppercase;

      }

      

      .tag-emergency {

        background: #fee;

        color: #c00;

      }

      

      .tag-normal {

        background: #e3f2fd;

        color: #1565c0;

      }

      

      .empty-state {

        text-align: center;

        padding: 2rem;

        color: #94a3b8;

      }

      

      .empty-state svg {

        width: 64px;

        height: 64px;

        fill: #cbd5e1;

        margin-bottom: 1rem;

      }

      

      input[type="text"],

      input[type="password"],

      input[type="date"],

      select,

      textarea {

        padding: 0.5rem;

        border-radius: 8px;

        border: 1px solid #e2e8f0;

        font-family: inherit;

        font-size: 0.875rem;

        transition: all 0.2s;

      }

      

      input:focus,

      select:focus,

      textarea:focus {

        outline: none;

        border-color: #667eea;

        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);

      }



      .form-group {

        margin-bottom: 1rem;

      }



      .table-scroll {

        overflow-x: auto;

      }



      .card table {

        width: 100%;

        border-collapse: collapse;

      }



      .card table th,

      .card table td {

        text-align: left;

        padding: 0.5rem 0.25rem;

      }



      label {

        display: block;

        margin-bottom: 0.5rem;

      }



      label small {

        font-weight: 600;

        color: #475569;

      }

      

      .kpi-grid {

        display: grid;

        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));

        gap: 1rem;

      }

      

      .kpi-card {

        text-align: center;

        padding: 1rem;

        background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);

        border-radius: 12px;

      }

      

      .kpi-value {

        font-size: 1.75rem;

        font-weight: 700;

        color: #667eea;

        margin-bottom: 0.25rem;

      }

      

      .kpi-label {

        font-size: 0.75rem;

        color: #64748b;

        font-weight: 600;

      }



      .map-container {

        height: 320px;

        border-radius: 12px;

        overflow: hidden;

        border: 1px solid #e2e8f0;

      }

      

      .section-header {

        display: flex;

        align-items: center;

        justify-content: space-between;

        gap: 0.75rem;

        margin: 1.25rem 0 0.5rem;

        color: #e2e8f0;

      }



      .section-title {

        font-size: 1.1rem;

        font-weight: 700;

        color: #f8fafc;

      }



      .section-eyebrow {

        font-size: 0.7rem;

        letter-spacing: 0.12em;

        text-transform: uppercase;

        color: #94a3b8;

      }



      .section-subtitle {

        font-size: 0.85rem;

        color: #cbd5e1;

      }



      .section-anchor {

        height: 1px;

        width: 100%;

        position: relative;

        top: -72px;

      }



      .integration-row {

        display: flex;

        align-items: center;

        justify-content: space-between;

        gap: 0.75rem;

        padding: 0.6rem 0;

        border-bottom: 1px solid #f1f5f9;

      }



      .integration-row:last-child {

        border-bottom: none;

      }



      .integration-row .label {

        font-weight: 600;

        color: #0f172a;

      }



      .integration-row .status {

        display: inline-flex;

        align-items: center;

        gap: 0.35rem;

        padding: 0.2rem 0.6rem;

        border-radius: 999px;

        font-size: 0.8rem;

        font-weight: 600;

      }



      .integration-row.connected .status {

        background: #ecfdf3;

        color: #15803d;

      }



      .integration-row.disconnected .status {

        background: #fff7ed;

        color: #c2410c;

      }

      .integration-row.error .status {
        background: #fef2f2;
        color: #b91c1c;
      }



      .tips-list {

        list-style: none;

        display: grid;

        gap: 0.6rem;

        margin: 0.75rem 0 0;

        padding: 0;

      }



      .tips-list li {

        padding: 0.7rem 0.8rem;

        border-radius: 10px;

        background: #f8fafc;

        color: #1f2937;

        font-size: 0.9rem;

      }



      .mobile-nav {

        position: fixed;

        bottom: 0;

        left: 0;

        right: 0;

        height: var(--nav-height);

        background: rgba(15, 23, 42, 0.95);

        border-top: 1px solid rgba(255, 255, 255, 0.08);

        display: none;

        grid-template-columns: repeat(4, 1fr);

        z-index: 80;

        backdrop-filter: blur(12px);

      }



      .mobile-nav button {

        background: none;

        border: none;

        color: #cbd5e1;

        display: grid;

        place-items: center;

        gap: 0.25rem;

        font-size: 0.8rem;

        font-weight: 700;

        cursor: pointer;

      }



      .mobile-nav button .icon {

        width: 22px;

        height: 22px;

      }



      .mobile-nav button.active {

        color: #22c55e;

      }

      

      body.dark {

        background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);

        color: #e2e8f0;

      }

      

      body.dark .header-bar {

        background: rgba(26, 32, 44, 0.95);

        border-bottom-color: rgba(255, 255, 255, 0.1);

      }

      

      body.dark .card {

        background: #2d3748;

        border-color: rgba(255, 255, 255, 0.1);

      }

      

      body.dark .card h2 {

        color: #e2e8f0;

      }

      

      body.dark .metric-label {

        color: #a0aec0;

      }

      

      body.dark .metric-value {

        color: #e2e8f0;

      }

      

      body.dark input,

      body.dark select,

      body.dark textarea {

        background: #1a202c;

        border-color: #4a5568;

        color: #e2e8f0;

      }

      

      .loading {

        display: flex;

        align-items: center;

        justify-content: center;

        padding: 2rem;

        color: #94a3b8;

      }

      

      .loading::after {

        content: "";

        width: 20px;

        height: 20px;

        border: 3px solid #e2e8f0;

        border-top-color: #667eea;

        border-radius: 50%;

        animation: spin 0.8s linear infinite;

        margin-left: 0.5rem;

      }

      

      @keyframes spin {

        to { transform: rotate(360deg); }

      }

      

      .feature-grid {

        display: grid;

        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));

        gap: 1rem;

        margin: 1rem 0;

      }

      

      .feature-item {

        display: flex;

        align-items: start;

        gap: 0.75rem;

        padding: 0.75rem;

        background: #f8fafc;

        border-radius: 8px;

      }

      

      body.dark .feature-item {

        background: #1a202c;

      }

      

      .feature-icon {

        width: 32px;

        height: 32px;

        border-radius: 8px;

        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

        display: flex;

        align-items: center;

        justify-content: center;

        flex-shrink: 0;

      }

      

      .feature-icon svg {

        width: 16px;

        height: 16px;

        fill: white;

      }



      .calendar-grid {

        display: grid;

        grid-template-columns: repeat(auto-fit, minmax(32px, 1fr));

        gap: 0.35rem;

      }



      .calendar-day {

        display: flex;

        flex-direction: column;

        align-items: center;

        justify-content: center;

        padding: 0.35rem 0.25rem;

        border-radius: 8px;

        border: none;

        background: #edf2f7;

        color: #1f2933;

        font-size: 0.7rem;

        cursor: pointer;

        transition: all 0.15s ease;

      }



      .calendar-day:hover {

        transform: translateY(-1px);

        box-shadow: 0 4px 10px rgba(15, 23, 42, 0.15);

      }



      .calendar-day-date {

        font-weight: 600;

        margin-bottom: 0.05rem;

      }



      .calendar-day-total {

        font-size: 0.7rem;

        opacity: 0.8;

      }



      .calendar-day-emergency {

        background: #fee2e2;

        color: #991b1b;

      }



      .calendar-day-maintenance {

        background: #ecfdf5;

        color: #047857;

      }



      .calendar-day-routine {

        background: #e0f2fe;

        color: #0369a1;

      }



      .calendar-day-new-client {

        background: #eef2ff;

        color: #4338ca;

      }



      body.dark .calendar-day {

        background: #1f2937;

        color: #e5e7eb;

      }



      body.dark .calendar-day-emergency {

        background: rgba(248, 113, 113, 0.25);

        color: #fecaca;

      }



      body.dark .calendar-day-maintenance {

        background: rgba(16, 185, 129, 0.25);

        color: #a7f3d0;

      }



      body.dark .calendar-day-routine {

        background: rgba(59, 130, 246, 0.25);

        color: #bfdbfe;

      }



      body.dark .calendar-day-new-client {

        background: rgba(129, 140, 248, 0.25);

        color: #c7d2fe;

      }



      .calendar-legend {

        display: flex;

        flex-wrap: wrap;

        gap: 0.5rem;

        margin-top: 0.75rem;

        font-size: 0.75rem;

        color: #64748b;

      }



      .calendar-legend-item {

        display: flex;

        align-items: center;

        gap: 0.25rem;

      }



      .calendar-legend-swatch {

        width: 12px;

        height: 12px;

        border-radius: 4px;

      }



      .modal-backdrop {

        position: fixed;

        inset: 0;

        background: rgba(15, 23, 42, 0.6);

        display: none;

        align-items: center;

        justify-content: center;

        z-index: 50;

      }



      .modal {

        background: #ffffff;

        border-radius: 12px;

        padding: 1.5rem;

        max-width: 620px;

        width: 100%;

        box-shadow: 0 20px 40px rgba(15, 23, 42, 0.35);

      }



      .modal-header {

        display: flex;

        align-items: center;

        justify-content: space-between;

        margin-bottom: 1rem;

      }



      .modal-title {

        font-size: 1rem;

        font-weight: 600;

        color: #111827;

      }



      .modal-body {

        max-height: 60vh;

        overflow-y: auto;

        font-size: 0.875rem;

        color: #374151;

      }



      .modal-footer {

        display: flex;

        justify-content: flex-end;

        gap: 0.5rem;

        margin-top: 1rem;

      }



      body.dark .modal {

        background: #1f2937;

        color: #e5e7eb;

      }



      body.dark .modal-title {

        color: #f9fafb;

      }



      body.dark .modal-body {

        color: #d1d5db;

      }



      .assistant-root {

        position: fixed;

        bottom: 1.5rem;

        right: 1.5rem;

        z-index: 60;

      }



      .assistant-toggle {

        display: inline-flex;

        align-items: center;

        gap: 0.4rem;

        padding: 0.6rem 0.9rem;

        border-radius: 999px;

        background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);

        border: none;

        color: #f9fafb;

        font-size: 0.8rem;

        font-weight: 600;

        cursor: pointer;

        box-shadow: 0 8px 20px rgba(79, 70, 229, 0.4);

      }



      .assistant-toggle-icon {

        width: 18px;

        height: 18px;

        border-radius: 999px;

        background: rgba(15, 23, 42, 0.2);

        display: flex;

        align-items: center;

        justify-content: center;

      }



      .assistant-toggle-icon svg {

        width: 13px;

        height: 13px;

        fill: currentColor;

      }



      .assistant-panel {

        position: absolute;

        bottom: 3.25rem;

        right: 0;

        width: 360px;

        max-height: 520px;

        border-radius: 16px;

        background: #ffffff;

        box-shadow: 0 18px 40px rgba(15, 23, 42, 0.4);

        display: none;

        flex-direction: column;

        overflow: hidden;

      }



      .assistant-header {

        padding: 0.9rem 1rem;

        border-bottom: 1px solid #e5e7eb;

        display: flex;

        align-items: center;

        justify-content: space-between;

        gap: 0.5rem;

      }



      .assistant-title {

        font-size: 0.9rem;

        font-weight: 600;

        color: #111827;

      }



      .assistant-subtitle {

        font-size: 0.7rem;

        color: #6b7280;

      }



      .assistant-close {

        background: transparent;

        border: none;

        color: #9ca3af;

        padding: 0.25rem;

        cursor: pointer;

      }



      .assistant-messages {

        padding: 0.75rem 1rem;

        display: flex;

        flex-direction: column;

        gap: 0.5rem;

        overflow-y: auto;

        flex: 1 1 auto;

      }



      .assistant-message {

        font-size: 0.8rem;

        line-height: 1.4;

        border-radius: 10px;

        padding: 0.5rem 0.7rem;

        max-width: 100%;

      }



      .assistant-message-user {

        align-self: flex-end;

        background: #e0e7ff;

        color: #111827;

      }



      .assistant-message-assistant {

        align-self: flex-start;

        background: #f3f4f6;

        color: #111827;

      }



      .assistant-message-system {

        align-self: center;

        background: #eff6ff;

        color: #1d4ed8;

        font-size: 0.75rem;

      }



      .assistant-form {

        border-top: 1px solid #e5e7eb;

        padding: 0.6rem 0.8rem;

        display: flex;

        flex-direction: column;

        gap: 0.35rem;

      }



      .assistant-form textarea {

        resize: none;

        min-height: 56px;

        max-height: 120px;

      }



      .assistant-form-actions {

        display: flex;

        align-items: center;

        justify-content: space-between;

        gap: 0.5rem;

        font-size: 0.7rem;

      }



      .assistant-status {

        color: #6b7280;

      }



      body.dark .assistant-panel {

        background: #111827;

        border: 1px solid #374151;

      }



      body.dark .assistant-header {

        border-bottom-color: #374151;

      }



      body.dark .assistant-title {

        color: #e5e7eb;

      }



      body.dark .assistant-subtitle {

        color: #9ca3af;

      }



      body.dark .assistant-message-assistant {

        background: #1f2937;

        color: #e5e7eb;

      }



      body.dark .assistant-message-user {

        background: rgba(79, 70, 229, 0.4);

        color: #e5e7eb;

      }



      body.dark .assistant-message-system {

        background: rgba(59, 130, 246, 0.3);

        color: #bfdbfe;

      }



      body.dark .assistant-form {

        border-top-color: #374151;

      }



      @media (max-width: 960px) {

        .header-bar {

          padding: 0.9rem 1.1rem;

        }

        .header-content {

          gap: 1rem;

        }

        .container {

          padding: 1rem;

        }

        .card {

          padding: 1.25rem;

        }

        .dashboard-grid {

          grid-template-columns: 1fr;

        }

        body {

          padding-bottom: calc(var(--nav-height) + 10px);

        }

        .mobile-nav {

          display: grid;

        }

        .assistant-root {

          bottom: calc(var(--nav-height) + 0.5rem);

        }

        #feedback-fab {
          bottom: calc(var(--nav-height) + 16px) !important;
          left: 16px !important;
          right: auto !important;
        }

      }



      @media (max-width: 640px) {

        .header-bar {

          padding: 0.8rem 1rem;

        }

        .controls {

          width: 100%;

          justify-content: flex-start;

          flex-wrap: wrap;

        }

        .controls > * {
          flex: 1 1 140px;
          min-width: 0;
        }

        #business-select {
          min-width: 0 !important;
        }

        .status-bar {

          width: 100%;

          justify-content: flex-start;

        }

        body {

          padding-bottom: calc(var(--nav-height) + 8px);

        }

        .assistant-panel {
          width: min(360px, calc(100vw - 2rem));
        }

        .card table {

          display: block;

          overflow-x: auto;

      }

    }

      /* Feedback modal */
      #feedback-fab {
        position: fixed;
        bottom: 24px;
        right: 24px;
        padding: 0.75rem 1rem;
        border-radius: 999px;
        background: var(--text);
        color: #fff;
        border: none;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        cursor: pointer;
        z-index: 1200;
      }
      #feedback-fab:focus-visible {
        outline: 2px solid #0ea5e9;
        outline-offset: 3px;
      }
      #feedback-overlay {
        position: fixed;
        inset: 0;
        background: rgba(15, 23, 42, 0.45);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1300;
      }
      #feedback-modal {
        background: #fff;
        border-radius: 12px;
        padding: 1.25rem;
        width: min(520px, 90vw);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
      }
      #feedback-modal h3 {
        margin: 0 0 0.5rem 0;
      }
      #feedback-modal .muted {
        margin-bottom: 0.75rem;
        display: block;
      }
      #feedback-modal form {
        display: grid;
        gap: 0.75rem;
      }
      #feedback-modal textarea {
        width: 100%;
        min-height: 70px;
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 0.6rem;
        font-family: inherit;
      }
      #feedback-modal input,
      #feedback-modal select {
        width: 100%;
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 0.6rem;
        font-family: inherit;
      }
      #feedback-actions {
        display: flex;
        gap: 0.5rem;
        justify-content: flex-end;
      }

    </style>

  </head>

  <body>

    <!-- Header -->

    <div class="header-bar">

      <div class="header-content">

        <div class="logo-section">

          <div class="logo">

            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

              <path d="M20 15.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.02.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.59l2.2-2.21c.28-.26.36-.65.25-1C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1z"/>

            </svg>

          </div>

          <div>

            <h1 data-i18n="app_title">AI Telephony Dashboard</h1>

            <div style="font-size: 0.75rem; color: #64748b;" data-i18n="app_tagline">Owner Command Center</div>

          </div>

        </div>

        <div class="status-bar">

          <div id="connection-status" class="status-badge muted">

            <span class="status-dot"></span>

            <span data-i18n="status_connecting">Connecting...</span>

          </div>

          <div id="plan-badge" class="status-badge muted" style="display: none;"></div>

          <div id="user-chip" class="user-chip muted" aria-live="polite">

            <div class="user-dot"></div>

            <div class="user-chip-text">Signed out</div>

          </div>

          <div id="business-switcher" class="ghost-button" style="display: none; align-items: center; gap: 0.35rem;">

            <span style="font-size: 0.8rem; color: #475569;">Business</span>

            <select id="business-select" class="locale-select" style="min-width: 170px;"></select>

          </div>

          <button id="logout-btn" class="ghost-button" type="button" style="display: none;">Logout</button>

          <a id="login-link-header" class="ghost-button" href="login.html">Login</a>

          <a class="ghost-button" href="/planner" target="_blank" rel="noopener" aria-label="Open investor planner">
            Investor Brief
          </a>

          <div class="controls">

            <label for="locale-select" style="font-size:0.8rem; color:#475569;" data-i18n="locale_label">Language</label>

            <select id="locale-select" class="locale-select" aria-label="Select language">

              <option value="en" data-i18n="locale_en">English</option>

              <option value="es" data-i18n="locale_es">Espa√±ol</option>

            </select>

            <button id="theme-toggle" type="button" data-i18n="theme_dark">Dark Mode</button>

            <button id="refresh-all" type="button" data-i18n="refresh_all">Refresh All</button>

          </div>

        </div>

      </div>

    </div>



    <!-- Main Container -->

    <div class="container">

      <div class="data-strip" id="data-strip">

        <div class="data-pill" id="data-pill-calendar">

          <div>

            <strong>Calendar sync</strong>

            <div class="pill-note">Keep owner calendar connected for auto-bookings.</div>

          </div>

          <button class="pill-action" type="button" data-target="schedule-card">Review</button>

        </div>

        <div class="data-pill" id="data-pill-voice">

          <div>

            <strong>Twilio webhooks</strong>

            <div class="pill-note">Calls should hit the voice streaming webhook.</div>

          </div>

          <button class="pill-action" type="button" data-target="integration-card">Check</button>

          <div class="muted" id="voice-health-note" style="font-size: 0.8rem; margin-top: 0.3rem;"></div>

        </div>

        <div class="data-pill" id="data-pill-speech">

          <div>

            <strong>Speech services</strong>

            <div class="pill-note">Monitor STT/TTS providers.</div>

          </div>

          <button class="pill-action" type="button" data-target="integration-card">Inspect</button>

          <div class="muted" id="speech-health-note" style="font-size: 0.8rem; margin-top: 0.3rem;"></div>

        </div>

        <div class="data-pill" id="data-pill-billing">

          <div>

            <strong>Billing & plan</strong>

            <div class="pill-note">Verify payment method and active plan.</div>

          </div>

          <button class="pill-action" type="button" data-target="subscription-card">Open</button>

        </div>

      </div>

      <div class="quick-actions" id="quick-actions">

        <button type="button" data-target="staff-invite-form-wrapper">Invite teammate</button>

        <button type="button" data-target="integration-card">Connect apps</button>

        <button type="button" data-target="subscription-card">Manage billing</button>

        <button type="button" data-target="chat-card">Recent conversations</button>

        <button type="button" data-link="onboarding.html">Finish onboarding</button>

      </div>

      <div class="section-anchor" id="section-settings"></div>

      <div class="section-header">

        <div>

          <div class="section-eyebrow" data-i18n="access_eyebrow">Access</div>

          <div class="section-title" data-i18n="settings_title">Settings & Integrations</div>

          <div class="section-subtitle" data-i18n="settings_subtitle">Save your tokens and verify key connections.</div>

        </div>

      </div>

      <!-- Owner Authentication -->

      <div class="card" aria-labelledby="owner-auth-title">

        <div class="card-header">

          <div class="card-icon">

            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

              <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>

            </svg>

          </div>

          <h2 id="owner-auth-title" data-i18n="owner_auth_title">Owner Authentication</h2>

        </div>

        <div class="form-group">

          <label>

          <small data-i18n="tenant_api_key_label">Tenant API Key (X-API-Key)</small>

          <input id="owner-api-key-input" type="password" placeholder="Enter your tenant API key" aria-label="Tenant API key" data-i18n="tenant_api_key_placeholder" data-i18n-attr="placeholder,aria-label" />

        </label>

      </div>

      <div class="form-group">

        <label>

          <small data-i18n="owner_token_label">Owner Token (X-Owner-Token)</small>

          <input id="owner-token-input" type="password" placeholder="Enter your owner dashboard token" aria-label="Owner token" data-i18n="owner_token_placeholder" data-i18n-attr="placeholder,aria-label" />

        </label>

      </div>

      <div class="form-group">

        <label>

          <small data-i18n="business_id_label">Business ID (X-Business-ID)</small>

          <div style="display: flex; gap: 0.5rem;">

            <input id="business-id-input" type="text" placeholder="e.g. default_business or tenant id" aria-label="Business ID" data-i18n="business_id_placeholder" data-i18n-attr="placeholder,aria-label" />

            <button id="business-apply" type="button" style="min-width: 80px;" data-i18n="apply">Apply</button>

            <button id="business-clear" type="button" style="min-width: 80px;" data-i18n="clear">Clear</button>

          </div>

        </label>

        <small class="muted" data-i18n="business_hint">Switch between businesses without changing API keys (requires role access).</small>

      </div>

        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 0.25rem;">

          <small id="owner-auth-status" class="muted"></small>

          <span id="owner-plan-label" class="pill" style="display: none;">Plan: Starter</span>

        </div>

      </div>



      <div class="card" id="user-management-card">

        <div class="card-header">

          <div class="card-icon">

            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v1h16v-1c0-2.66-5.33-4-8-4z"/>

            </svg>

          </div>

          <h2>User Management & Session</h2>

        </div>

        <div class="form-group">

          <div id="user-session-summary" class="muted">Signed out. Use login to continue.</div>

          <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-top: 0.5rem;">

            <a class="ghost-button" href="login.html">Login</a>

            <button id="logout-btn-inline" class="ghost-button" type="button" style="display: none;">Logout</button>

          </div>

        </div>

        <div class="form-group" id="staff-invite-form-wrapper">

          <label style="font-weight: 700;">Invite staff to this business</label>

          <form id="staff-invite-form">

            <div class="form-group">

              <label>

                <small>Email</small>

                <input id="invite-email" type="email" placeholder="crew@example.com" required />

              </label>

            </div>

            <div class="form-group">

              <label>

                <small>Role</small>

                <select id="invite-role" required>

                  <option value="staff">Staff</option>

                  <option value="viewer">Viewer</option>

                  <option value="admin">Admin</option>

                </select>

              </label>

            </div>

            <div style="display: flex; gap: 0.5rem; align-items: center; flex-wrap: wrap;">

              <button type="submit" style="flex: 1; min-width: 160px;">Send Invite</button>

              <small class="muted">Creates an invite token. Teammates set their own password.</small>

            </div>

            <div id="staff-invite-status" class="muted" style="margin-top: 0.35rem;"></div>

          </form>

        </div>

        <div id="staff-invite-list" class="muted" style="margin-top: 0.75rem;">No invites sent yet.</div>

        </div>

      <div class="card" id="subscription-card">

        <div class="card-header">

          <div class="card-icon">

            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

              <path d="M12 2a5 5 0 00-5 5c0 3.5 5 9 5 9s5-5.5 5-9a5 5 0 00-5-5zm0 7a2 2 0 110-4 2 2 0 010 4z"/>

            </svg>

          </div>

          <h2>Subscription & Billing</h2>

        </div>

        <div class="form-group">

          <span id="subscription-pill" class="pill muted">Subscription: unknown</span>

        </div>

        <div class="form-group">

          <label><small>Plan</small></label>

          <select id="plan-select">

            <option value="basic">Starter</option>

            <option value="growth">Growth</option>

            <option value="scale">Scale</option>

          </select>

        </div>

        <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">

          <button id="start-subscription" type="button" style="min-width: 160px;">Start/Resume Subscription</button>

          <button id="manage-billing" type="button" class="ghost-button" style="min-width: 160px;">Manage Billing</button>

        </div>

        <div id="subscription-status-text" class="muted" style="margin-top: 0.35rem;"></div>

        <div id="subscription-warning" class="pill muted" style="margin-top: 0.35rem; display: none;"></div>

        <div id="subscription-usage" class="muted" style="margin-top: 0.35rem;"></div>

        <ul id="subscription-warnings-list" class="muted" style="margin: 0.35rem 0 0 1rem; padding-left: 1rem; display: none;"></ul>

      </div>



      <div class="card" id="team-card">

        <div class="card-header">

          <div class="card-icon">

            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

              <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5C15 14.17 10.33 13 8 13zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5C23 14.17 18.33 13 16 13z"/>

            </svg>

          </div>

          <h2>Team & Roles</h2>

        </div>

        <div id="team-content">

          <div class="loading">Loading team...</div>

        </div>

      </div>



      <div class="card">
        <div class="card-header">
          <div>
            <p class="muted">Team & Roles</p>
            <h2>Members</h2>
          </div>
          <div class="pill connected" id="active-business-pill" aria-live="polite"></div>
        </div>

        <div class="quick-actions" style="margin-bottom: 0.75rem;">
          <div>
            <label for="active-business-input" class="muted" style="font-size: 0.8rem;">Switch active business</label>
            <div style="display:flex; gap:0.5rem; flex-wrap:wrap;">
              <input id="active-business-input" type="text" placeholder="business_id" aria-label="Active business id" />
              <button type="button" class="ghost-button" id="set-active-business">Set active</button>
            </div>
          </div>
          <div>
            <label class="muted" style="font-size: 0.8rem;">Invite teammate</label>
            <button type="button" class="ghost-button" data-target="staff-invite-form-wrapper">Open invite form</button>
          </div>
        </div>

        <div id="team-table" class="muted">Loading team...</div>
      </div>

      <div class="card" id="audit-card">
        <div class="card-header">
          <div>
            <p class="muted">Team & Roles</p>
            <h2>Activity Log</h2>
          </div>
          <div class="pill muted" id="audit-count-pill">No entries</div>
        </div>

        <div class="filter-row" style="margin-bottom: 0.5rem;">
          <select id="audit-actor-filter" aria-label="Filter by actor">
            <option value="">All actors</option>
            <option value="dashboard_user">Dashboard user</option>
            <option value="system">System</option>
          </select>
          <select id="audit-method-filter" aria-label="Filter by method">
            <option value="">All methods</option>
            <option value="POST">POST</option>
            <option value="PATCH">PATCH</option>
            <option value="DELETE">DELETE</option>
          </select>
          <input id="audit-path-filter" type="text" placeholder="Filter by path..." aria-label="Filter by path" />
          <button id="audit-refresh" type="button">Refresh</button>
        </div>

        <div id="audit-log-content" class="muted">Loading activity...</div>
      </div>

        <div class="card" id="callbacks-card">

        <div class="card-header">

          <div class="card-icon">

            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

              <path d="M6.62 10.79a15.053 15.053 0 006.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.32.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1C10.07 21 3 13.93 3 5c0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.24 1.02l-2.21 2.2z"/>

            </svg>

          </div>

          <h2>Callbacks & Voicemails</h2>

        </div>

        <div class="muted" id="callbacks-updated" style="font-size: 0.8rem; margin: -0.35rem 0 0.35rem;">Not refreshed yet.</div>

        <div class="filter-row">
          <input id="callbacks-filter" type="text" placeholder="Filter by phone or reason..." aria-label="Filter callbacks" />
          <select id="callbacks-status-filter" aria-label="Filter callback status">
            <option value="">All statuses</option>
            <option value="RESOLVED">Resolved</option>
            <option value="PENDING">Pending</option>
          </select>
          <select id="callbacks-sort" aria-label="Sort callbacks">
            <option value="newest">Newest first</option>
            <option value="oldest">Oldest first</option>
          </select>
          <button type="button" class="ghost-button" id="callbacks-clear">Clear</button>
          <span class="muted" id="callbacks-count" style="font-size: 0.85rem;">Showing 0</span>
        </div>
        <div class="summary-row" id="callbacks-summary">No callbacks yet.</div>
        <div id="callbacks-list">

          <div class="loading">Loading callbacks...</div>

        </div>

        <div style="margin-top: 0.75rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">

          <button id="refresh-callbacks" type="button">Refresh</button>
          <button id="download-callbacks" type="button">Download CSV</button>

          <small class="muted">Missed/partial calls and voicemails appear here for follow-up. LLM assists intents but emergencies stay deterministic.</small>

          <label style="display:flex; align-items:center; gap:0.35rem;">
            <input type="checkbox" id="email-alerts-toggle" />
            <span class="muted">Email owner alerts (Gmail connected)</span>
          </label>

        </div>

      </div>



      <div class="card" id="integration-card">

        <div class="card-header">

          <div class="card-icon">

            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

              <path d="M10 3H3v7h7V3zm0 11H3v7h7v-7zM21 3h-7v7h7V3zm0 11h-7v7h7v-7z"/>

            </svg>

          </div>

          <h2 data-i18n="integration_title">Integration Status</h2>

        </div>

        <div id="integration-status-list">

          <div class="loading" data-i18n="integration_loading">Loading integrations</div>

        </div>

      </div>



      <div class="section-anchor" id="section-dashboard"></div>

      <div class="section-header">

        <div>

          <div class="section-eyebrow" data-i18n="overview_eyebrow">Overview</div>

          <div class="section-title" data-i18n="overview_title">Owner Dashboard</div>

          <div class="section-subtitle" data-i18n="overview_subtitle">Bookings, revenue signals, and assistant tips at a glance.</div>

        </div>

      </div>



      <!-- Quick Stats -->

      <div class="dashboard-grid">

        <!-- KPI Overview -->

        <div class="card" id="kpi-card" style="grid-column: span 2;">

          <div class="card-header">

            <div class="card-icon">

              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>

              </svg>

            </div>

            <h2 data-i18n="kpi_title">Key Performance Indicators</h2>

          </div>

          <div class="kpi-grid" id="owner-kpis-content">

            <div class="loading" data-i18n="kpi_loading">Loading KPIs</div>

          </div>

          <button id="refresh-owner-kpis" type="button" style="margin-top: 1rem; width: 100%;" data-i18n="kpi_refresh">Refresh KPIs</button>

        </div>



        <!-- QuickBooks Link & Pending -->

        <div class="card">

          <div class="card-header">

            <div class="card-icon">

              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

                <path d="M12 2C6.48 2 2 5.58 2 10c0 2.94 1.94 5.51 4.9 7.02-.21.74-.79 2.75-.9 3.18 0 0-.02.17.09.23.11.05.25.02.25.02.33-.05 2.15-1.41 2.49-1.66.68.1 1.38.16 2.08.16 5.52 0 10-3.58 10-8s-4.48-8-10-8z"/>

              </svg>

            </div>

            <h2>QuickBooks Link & Approvals</h2>

        </div>

        <div id="owner-qbo-mode" class="muted" style="margin: 0.25rem 0;"></div>

        <div id="owner-qbo-content">

          <div class="loading">Loading QuickBooks status...</div>

        </div>

          <div class="button-row" style="margin-top: 1rem;">

            <button id="owner-qbo-connect" type="button">Link QuickBooks</button>

            <button id="owner-qbo-refresh" type="button" class="secondary">Refresh</button>

            <button id="owner-qbo-notify" type="button" class="secondary">Notify owner</button>

            <span id="owner-qbo-pill" class="status-badge warning" aria-live="polite"></span>

          </div>

          <small id="owner-qbo-status" class="muted"></small>

        </div>



        <!-- Today's Summary -->

        <div class="card">

          <div class="card-header">

            <div class="card-icon">

              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

                <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11z"/>

              </svg>

            </div>

            <h2 data-i18n="today_title">Today's Jobs</h2>

          </div>

          <div id="today-summary-content">

            <div class="loading" data-i18n="today_loading">Loading</div>

          </div>

          <button id="refresh-today-summary" type="button" style="margin-top: 1rem; width: 100%;" data-i18n="today_refresh">Refresh</button>

        </div>



        <!-- Tomorrow's Schedule -->

        <div class="card" id="schedule-card" style="grid-column: span 2;">

          <div class="card-header">

            <div class="card-icon">

              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

                <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>

              </svg>

            </div>

          <h2 data-i18n="schedule_title">Tomorrow's Schedule</h2>

        </div>

        <p id="schedule-summary" style="margin-bottom: 1rem; color: #64748b;" data-i18n="schedule_loading">Loading schedule...</p>

        <div class="muted" id="schedule-updated" style="font-size: 0.8rem; margin: -0.35rem 0 0.35rem;">Not refreshed yet.</div>

        <div id="schedule-list"></div>

        <button id="refresh-schedule" type="button" style="margin-top: 1rem; width: 100%;" data-i18n="schedule_refresh">Refresh Schedule</button>

      </div>



        <!-- Emergency Jobs -->

        <div class="card">

          <div class="card-header">

            <div class="card-icon" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">

              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

                <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>

              </svg>

            </div>

            <h2 data-i18n="emergencies_title">Emergency Jobs</h2>

          </div>

          <div id="emergency-content">

            <div class="loading" data-i18n="emergencies_loading">Loading</div>

          </div>

          <button id="refresh-emergencies" type="button" style="margin-top: 1rem; width: 100%;" data-i18n="emergencies_refresh">Refresh</button>

        </div>



          <!-- Analytics -->

          <div class="card" style="grid-column: span 2;">

            <div class="card-header">

              <div class="card-icon">

              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

              <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>

            </svg>

          </div>

            <h2 data-i18n="analytics_title">Analytics Overview</h2>

          </div>

            <div id="analytics-content">

              <div class="loading" data-i18n="analytics_loading">Loading</div>

            </div>

            <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">

              <button id="refresh-analytics" type="button" style="flex: 1;" data-i18n="analytics_refresh">Refresh</button>

              <button id="download-service-mix" type="button" style="flex: 1;" data-i18n="analytics_download_csv">Download CSV</button>

            </div>

          </div>



          <!-- 90-Day Calendar (Tags) -->

          <div class="card" style="grid-column: span 2;" data-min-tier="100">

            <div class="card-header">

              <div class="card-icon">

                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

                  <path d="M7 10h5v5H7zM3 4h18v2H3zm16 4H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2z"/>

                </svg>

              </div>

              <h2 data-i18n="calendar_title">90-Day Calendar (Tags)</h2>

            </div>

            <div id="calendar-90d-content">

              <div class="loading" data-i18n="calendar_loading">Loading</div>

            </div>

            <div class="calendar-legend">

              <div class="calendar-legend-item">

                <span class="calendar-legend-swatch" style="background:#fee2e2;"></span>

                <span data-i18n="calendar_legend_emergency">Emergency</span>

              </div>

              <div class="calendar-legend-item">

                <span class="calendar-legend-swatch" style="background:#ecfdf5;"></span>

                <span data-i18n="calendar_legend_maintenance">Maintenance</span>

              </div>

              <div class="calendar-legend-item">

                <span class="calendar-legend-swatch" style="background:#e0f2fe;"></span>

                <span data-i18n="calendar_legend_routine">Routine</span>

              </div>

              <div class="calendar-legend-item">

                <span class="calendar-legend-swatch" style="background:#eef2ff;"></span>

                <span data-i18n="calendar_legend_new_client">New client</span>

              </div>

            </div>

          </div>

  

          <!-- Market by ZIP (Wealth & Value) -->

          <div class="card" style="grid-column: span 2;" data-min-tier="100">

            <div class="card-header">

            <div class="card-icon">

              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

                <path d="M12 2L4 5v6c0 5.52 3.84 10.74 9 12 5.16-1.26 9-6.48 9-12V5l-8-3zm0 2.18L18.16 7 12 9.82 5.84 7 12 4.18zM5 9l7 3 7-3v3c0 4.07-2.75 8.12-7 9.44C7.75 20.12 5 16.07 5 12V9z"/>

              </svg>

            </div>

            <h2 data-i18n="zip_title">Market by ZIP (Wealth & Value)</h2>

          </div>

          <div id="zip-wealth-content">

            <div class="loading" data-i18n="zip_loading">Loading</div>

          </div>

        </div>



        <!-- Service Metrics (Price & Time) -->

        <div class="card" style="grid-column: span 2;" data-min-tier="100">

        <div class="card-header">

          <div class="card-icon">

            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

              <path d="M3 17h2v-7H3v7zm4 0h2V7H7v10zm4 0h2v-4h-2v4zm4 0h2V3h-2v14zM3 19h18v2H3z"/>

            </svg>

          </div>

          <h2 data-i18n="service_metrics_title">Service Metrics (Price & Time)</h2>

        </div>

        <div class="muted" id="service-metrics-updated" style="font-size: 0.8rem; margin: -0.35rem 0 0.35rem;">Not refreshed yet.</div>

        <div id="service-metrics-content">

          <div class="loading" data-i18n="service_metrics_loading">Loading</div>

        </div>

      </div>



        <!-- AI Assistant Tips -->

        <div class="card" id="ai-tips-card">

          <div class="card-header">

            <div class="card-icon">

              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

                <path d="M12 2L2 7v2h1v8l9 5 9-5V9h1V7l-10-5zm0 2.18L18.16 8 12 11.82 5.84 8 12 4.18zM4 10l7 4v6l-7-3.89V10zm16 6.11L13 20v-6l7-4v6.11z"/>

              </svg>

            </div>

            <h2 data-i18n="ai_tips_title">AI Assistant & Tips</h2>

          </div>

          <p style="color: #475569; margin-top: 0.25rem;" data-i18n="ai_tips_intro">

            Ask the owner assistant for real-time answers, or start with these shortcuts.

          </p>

          <ul class="tips-list">

            <li data-i18n="ai_tip_one">"What emergencies are pending today and who's assigned?"</li>

            <li data-i18n="ai_tip_two">"Summarize bookings and revenue this week vs last week."</li>

            <li data-i18n="ai_tip_three">"Who are my top repeat customers in the last 90 days?"</li>

          </ul>

          <div style="display: flex; gap: 0.5rem; margin-top: 1rem; flex-wrap: wrap;">

            <button id="open-assistant-cta" type="button" style="flex: 1;" data-i18n="ai_tip_open">Open assistant</button>

            <button id="scroll-conversations" type="button" style="flex: 1;" data-i18n="ai_tip_view_conversations">View conversations</button>

          </div>

        </div>



        <!-- Conversations -->

        <div class="card" id="chat-card" style="grid-column: span 2;">

        <div class="card-header">

          <div class="card-icon">

            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

              <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"/>

            </svg>

          </div>

          <h2 data-i18n="conversations_title">Recent Conversations</h2>

        </div>

        <div class="muted" id="conversations-updated" style="font-size: 0.8rem; margin: -0.35rem 0 0.35rem;">Not refreshed yet.</div>

        <div class="filter-row">

          <input id="conversations-filter" type="text" placeholder="Filter by customer or outcome..." aria-label="Filter conversations" />

          <select id="conversations-channel-filter" aria-label="Filter by channel">

            <option value="">All channels</option>

            <option value="voice">Voice</option>

            <option value="sms">SMS</option>

            <option value="chat">Chat</option>

          </select>

          <select id="conversations-sort" aria-label="Sort conversations">

            <option value="newest">Newest first</option>

            <option value="oldest">Oldest first</option>

          </select>

          <button type="button" class="ghost-button" id="conversations-clear">Clear</button>

          <span class="muted" id="conversations-count" style="font-size: 0.85rem;">Showing 0</span>

        </div>
        <div class="summary-row" id="conversations-summary">No conversations yet.</div>

        <div id="conversations-list">

          <div class="loading" data-i18n="conversations_loading">Loading</div>

        </div>

        <div id="conversation-detail" style="margin-top: 1rem;"></div>

        <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">

            <button id="refresh-conversations" type="button" style="flex: 1;" data-i18n="conversations_refresh">Refresh</button>

            <button id="download-conversations" type="button" style="flex: 1;" data-i18n="conversations_download">Download CSV</button>

          </div>

        </div>

      </div>

    </div>



    <nav class="mobile-nav" aria-label="Primary navigation">

      <button type="button" data-target="kpi-card">

        <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

          <path fill="currentColor" d="M5 3h14a2 2 0 0 1 2 2v14l-4-4H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"/>

        </svg>

        <span data-i18n="mobile_dashboard">Dashboard</span>

      </button>

      <button type="button" data-target="schedule-card">

        <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

          <path fill="currentColor" d="M7 10h5v5H7zM5 3h2V1h2v2h6V1h2v2h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm14 4V5H5v2h14zM5 9v10h14V9H5z"/>

        </svg>

        <span data-i18n="mobile_schedule">Schedule</span>

      </button>

      <button type="button" data-target="chat-card">

        <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

          <path fill="currentColor" d="M4 4h16v10H5.17L4 15.17zM2 2v18l4-4h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H2z"/>

        </svg>

        <span data-i18n="mobile_chat">Chat</span>

      </button>

      <button type="button" data-target="integration-card">

        <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

          <path fill="currentColor" d="M4 4h16v2H4zm3 4h10v2H7zm-3 4h16v2H4zm3 4h10v2H7z"/>

        </svg>

        <span data-i18n="mobile_settings">Settings</span>

      </button>

    </nav>



    <!-- Calendar report modal -->

    <div id="calendar-report-modal" class="modal-backdrop" aria-hidden="true">

      <div class="modal" role="dialog" aria-modal="true" aria-labelledby="calendar-modal-title">

        <div class="modal-header">

          <div>

            <div id="calendar-modal-title" class="modal-title" data-i18n="modal_title">Schedule report</div>

            <div style="font-size: 0.75rem; color: #6b7280;" data-i18n="modal_subtitle">90-day calendar tags summarized for the selected day.</div>

          </div>

          <button id="calendar-modal-close" type="button" class="assistant-close" aria-label="Close schedule report" data-i18n="modal_close_btn" data-i18n-attr="aria-label">&times;</button>

        </div>

        <div id="calendar-modal-body" class="modal-body">

          <div class="loading" data-i18n="loading_preparing_report">Preparing report...</div>

        </div>

        <div class="modal-footer">

          <button id="calendar-modal-download" type="button" data-i18n="modal_download">Download PDF</button>

          <button id="calendar-modal-dismiss" type="button" data-i18n="modal_close_btn">Close</button>

        </div>

      </div>

    </div>



    <!-- Owner assistant bubble -->

    <div id="owner-assistant-root" class="assistant-root">

      <button
        id="owner-assistant-toggle"
        type="button"
        class="assistant-toggle"
        aria-haspopup="dialog"
        aria-controls="owner-assistant-panel"
        aria-expanded="false"
      >

        <span class="assistant-toggle-icon">

          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

            <path d="M4 4h16v10H5.17L4 15.17V4zm0-2c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2H4zm4 9h8v2H8v-2zm0-3h8v2H8V8z"/>

          </svg>

        </span>

        <span data-i18n="assistant_toggle">Ask the dashboard</span>

      </button>

      <div
        id="owner-assistant-panel"
        class="assistant-panel"
        role="dialog"
        aria-modal="false"
        aria-labelledby="owner-assistant-title"
        aria-hidden="true"
      >

        <div class="assistant-header">

          <div>

            <div id="owner-assistant-title" class="assistant-title" data-i18n="assistant_title">AI Owner Assistant</div>

            <div class="assistant-subtitle" data-i18n="assistant_subtitle">Ask about metrics, data, policies, or support.</div>

          </div>

          <button id="owner-assistant-close" type="button" class="assistant-close" aria-label="Close assistant" data-i18n="modal_close_btn" data-i18n-attr="aria-label">&times;</button>

        </div>

        <div id="owner-assistant-messages" class="assistant-messages">

          <div class="assistant-message assistant-message-system">

            <span data-i18n="assistant_system_prompt">Ask me about today's jobs, emergency volume, service metrics, your customers, or privacy and security policies.</span>

          </div>

        </div>

        <form id="owner-assistant-form" class="assistant-form">

          <textarea

            id="owner-assistant-input"

            rows="2"

            data-i18n="assistant_placeholder"

            data-i18n-attr="placeholder"

            placeholder="Ask a question about this dashboard, your metrics, data, policies, or support..."

          ></textarea>

          <div class="assistant-form-actions">

            <span id="owner-assistant-status" class="assistant-status"></span>

            <button id="owner-assistant-send" type="submit" data-i18n="assistant_send">Ask</button>

          </div>

        </form>

      </div>

    </div>



    <div id="feedback-overlay" aria-hidden="true">
      <div id="feedback-modal" role="dialog" aria-modal="true" aria-labelledby="feedback-title">
        <h3 id="feedback-title">Send feedback</h3>
        <span class="muted">Share a quick bug or idea. We include tenant context automatically.</span>
        <form id="feedback-form">
          <label>
            <small>Category</small>
            <select id="feedback-category">
              <option value="bug">Bug</option>
              <option value="idea">Idea</option>
              <option value="support">Support</option>
              <option value="other">Other</option>
            </select>
          </label>
          <label>
            <small>Summary *</small>
            <input id="feedback-summary" type="text" placeholder="What happened?" required />
          </label>
          <label>
            <small>Steps to reproduce</small>
            <textarea id="feedback-steps" placeholder="Step 1, Step 2"></textarea>
          </label>
          <label>
            <small>Expected</small>
            <textarea id="feedback-expected" placeholder="What you expected to happen"></textarea>
          </label>
          <label>
            <small>Actual</small>
            <textarea id="feedback-actual" placeholder="What actually happened"></textarea>
          </label>
          <label>
            <small>CallSid (if applicable)</small>
            <input id="feedback-call-sid" type="text" placeholder="Twilio CallSid" />
          </label>
          <label>
            <small>Contact (optional)</small>
            <input id="feedback-contact" type="text" placeholder="Email or phone" />
          </label>
          <div id="feedback-actions">
            <button type="button" class="secondary" id="feedback-close">Cancel</button>
            <button type="submit">Send</button>
          </div>
        </form>
      </div>
    </div>

    <script type="module" src="owner/main.js"></script>

</body>

</html>
